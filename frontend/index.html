<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <!-- Favicons -->
    <link rel="icon" type="image/x-icon" href="/fav/favicon.ico" />
    <link rel="icon" type="image/svg+xml" href="/fav/favicon.svg" />
    <link rel="icon" type="image/png" sizes="96x96" href="/fav/favicon-96x96.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="/fav/apple-touch-icon.png" />
    <link rel="manifest" href="/fav/site.webmanifest" />
    
    <meta name="barion-pixel-id" content="%VITE_BARION_PIXEL_ID%" />
    <title>Atelier Archilles â€” Photography Studio</title>
    
    <!-- Barion Pixel -->
    <script>
      (function(w, d) {
        // Initialize bp function with queue
        w.bp = w.bp || function() {
          (w.bp.q = w.bp.q || []).push(arguments);
        };
        w.bp.q = w.bp.q || [];
        w.bp.l = 1 * new Date();
        
        // Get pixel ID from meta tag
        var pixelId = '%VITE_BARION_PIXEL_ID%';
        
        // Validation and initialization
        if (!pixelId || pixelId === '%VITE_BARION_PIXEL_ID%') {
          console.warn('[Barion Pixel] Pixel ID not configured. Set VITE_BARION_PIXEL_ID environment variable.');
          return;
        }
        
        // Accept both BP- and BPT- prefixes (Barion uses both formats)
        if (!pixelId.startsWith('BP-') && !pixelId.startsWith('BPT-')) {
          console.error('[Barion Pixel] Invalid Pixel ID format. Expected format: BP-xxxxx or BPT-xxxxx');
          return;
        }
        
        // Initialize pixel immediately (don't wait for load)
        w.bp('init', 'addBarionPixelId', pixelId);
        
        // Debug logging
        if (window.location.hostname === 'localhost') {
          console.log('[Barion Pixel] Initialized with ID:', pixelId);
        }
        
        // Add error handler for pixel script loading
        var script = d.querySelector('script[src*="pixel.barion.com"]');
        if (script) {
          script.onerror = function() {
            console.error('[Barion Pixel] Failed to load pixel script from pixel.barion.com');
          };
        }
      })(window, document);
    </script>
    <script async src="https://pixel.barion.com/bp.js"></script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>


