<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Favicons -->
    <link rel="icon" type="image/x-icon" href="/fav/favicon.ico" />
    <link rel="icon" type="image/svg+xml" href="/fav/favicon.svg" />
    <link rel="icon" type="image/png" sizes="96x96" href="/fav/favicon-96x96.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="/fav/apple-touch-icon.png" />
    <link rel="manifest" href="/fav/site.webmanifest" />

    <title>Atelier Archilles â€” Photography Studio</title>

    <!-- Barion Pixel (Vite-friendly, correct boot order) -->
    <script>
      (function (w, d) {
        // Skip in local dev
        if (w.location.hostname === 'localhost' || w.location.hostname === '127.0.0.1') return;

        // Vite will replace this at build time
        var pixelId = '%VITE_BARION_PIXEL_ID%';
        if (!pixelId || pixelId.startsWith('%')) {
          console.warn('Barion Pixel: Missing VITE_BARION_PIXEL_ID.');
          return;
        }

        // 1) Expose pixel ID BEFORE loading bp.js
        w.barion_pixel_id = pixelId;

        // 2) Predefine the queue function that bp.js expects
        //    (so load_tracker can access window.bp.q safely)
        w.bp = w.bp || function () { (w.bp.q = w.bp.q || []).push(arguments); };
        w.bp.q = w.bp.q || [];
        // (optional) be explicit which function name to use
        w.barionpixel_function = 'bp';

        // 3) Load Barion script
        var s = d.createElement('script');
        s.type = 'text/javascript';
        s.async = true;
        s.src = 'https://pixel.barion.com/bp.js';
        var first = d.getElementsByTagName('script')[0];
        first.parentNode.insertBefore(s, first);
      })(window, document);
    </script>
  </head>

  <body>
    <!-- NoScript fallback must be inside <body> -->
    <noscript>
      <img
        height="1"
        width="1"
        style="display:none"
        src="https://pixel.barion.com/a.gif?pixelId=%VITE_BARION_PIXEL_ID%"
        alt="Barion Pixel"
      />
    </noscript>

    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>